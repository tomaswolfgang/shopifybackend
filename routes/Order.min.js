var express=require("express"),router=express.Router(),Middleware=require("./middleware.js"),Order=require("../mongoose/Order");router.post("/get",Middleware,function(a,b){Order.getOrders(a.session.userId,a.body.shopId,function(a,c){a?b.send({error:!0,message:a}):b.send({error:!1,message:"get orders success",orders:c})})});
router.post("/getProducts",Middleware,function(a,b){Order.findById(a.body.orderId).exec(function(a,c){a?b.send({error:!0,message:a}):c.getProducts(function(a,c){a?b.send({error:!0,message:a}):b.send({error:!1,message:"get products success",products:c})})})});router.post("/add",Middleware,function(a,b){Order.addToCart(a.body.productId,a.session.userId,a.body.shopId,function(a,c){a?b.send({error:!0,message:a,order:c}):b.send({error:!1,message:"Order added successfully",order:c})})});
router.post("/remove",Middleware,function(a,b){Order.removeFromCart(a.body.productId,a.session.userId,a.body.shopId,function(a,c){a?b.send({error:!0,message:a}):b.send({error:!1,message:"Order removed successfully",order:c})})});router.post("/checkout",Middleware,function(a,b){Order.checkout(a.session.userId,a.body.shopId,function(a,c){a?b.send({error:!0,message:a,order:c}):b.send({error:!1,message:"checkout success",order:c})})});module.exports=router;
