require("dotenv").load();var express=require("express"),mongoose=require("mongoose"),bodyParser=require("body-parser"),crypto=require("crypto"),session=require("express-session"),MongoStore=require("connect-mongo")(session),app=express();app.use(bodyParser.urlencoded({extended:!0}));app.use(bodyParser.json());mongoose.connect(process.env.DB_LINK);var db=mongoose.connection;db.on("error",function(){console.log("---FAILED to connect to mongoose")});db.once("open",function(){});
app.use(session({secret:"tommy god",resave:!0,saveUninitialized:!1,store:new MongoStore({mongooseConnection:db})}));var routes=require("./routes");app.use(routes);app.listen(3E3,function(){console.log("+++Express Server is Running!!!")});app.get("/",function(b,a){a.sendFile(__dirname+"/index.html")});exports.closeServer=function(){server.close()};
